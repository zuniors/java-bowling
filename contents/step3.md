# 3단계 - 볼링 점수판 (점수 계산)
## 주어진 기능 요구사항
- 사용자 1명의 볼링 게임 점수를 관리할 수 있는 프로그램을 구현한다.
- 스트라이크는 다음 2번의 투구까지 점수를 합산해야 한다. 스페어는 다음 1번의 투구까지 점수를 합산해야 한다.
- 10 프레임은 스트라이크이거나 스페어이면 한 번을 더 투구할 수 있다.

## 프로그래밍 요구사항
- 객체지향 5원칙을 지키면서 프로그래밍한다.
- 객체지향 5원칙(SOLID)
    - SRP (단일책임의 원칙: Single Responsibility Principle)
        - 작성된 클래스는 하나의 기능만 가지며 클래스가 제공하는 모든 서비스는 그 하나의 책임(변화의 축: axis of change)을 수행하는 데 집중되어 있어야 한다
    - OCP (개방폐쇄의 원칙: Open Close Principle)
        - 소프트웨어의 구성요소(컴포넌트, 클래스, 모듈, 함수)는 확장에는 열려있고, 변경에는 닫혀있어야 한다.
    - LSP (리스코브 치환의 원칙: The Liskov Substitution Principle)
        - 서브 타입은 언제나 기반 타입으로 교체할 수 있어야 한다. 즉, 서브 타입은 언제나 기반 타입과 호환될 수 있어야 한다.
    - ISP (인터페이스 분리의 원칙: Interface Segregation Principle)
        - 한 클래스는 자신이 사용하지 않는 인터페이스는 구현하지 말아야 한다.
    - DIP (의존성역전의 원칙: Dependency Inversion Principle)
        - 구조적 디자인에서 발생하던 하위 레벨 모듈의 변경이 상위 레벨 모듈의 변경을 요구하는 위계관계를 끊는 의미의 역전 원칙이다.

## 기능 요구사항 목록 
### # M (Model)
#### Name
- [x] 이름이 null 이거나 빈 문자열이면 예외가 발생한다.
- [x] 이름은 3글자를 넘길 수 없다.
- [x] 이름을 반환한다.
- [x] 논리적 동치성 비교 

#### Player
- [x] 이름 정보를 가지고 Player 를 생성할 수 있다.
- [x] 참여자의 이름은 3글자를 넘길 수 없다.
- [x] 논리적 동치성 비교 

#### PinCount
: 볼링 수 
- [x] 넘어뜨린 최초 볼링 수가 0 미만이면 예외를 반환한다.
- [x] 총 넘어뜨린 볼링 수가 10 초과면 예외를 반환한다. 
- [x] 최대 개수와 동일한지 여부를 반환한다.
- [x] 최대 개수보다 작은지에 대한 여부를 반환한다.
- [x] 최소 개수와 동일한지 여부를 반환한다.
- [x] 인자의 수 만큼 증가한 볼링 수를 반환한다.
- [x] 볼링수를 반환한다.
- [x] 논리적 동치성 비교 

#### Pins
: 볼링 판에 놓인 볼링
- [x] 넘어뜨린 볼링이 0~10 이외의 값이면 예외를 반환한다.
- 각 상태인지 확인할 수 있다.
    - [x] 스트라이크(strike) : 프레임의 첫번째 투구에서 모든 핀(10개)을 쓰러트린 상태
    - [x] 스페어(spare) : 프레임의 두번째 투구에서 모든 핀(10개)을 쓰러트린 상태
    - [x] 미스(miss) : 프레임의 두번째 투구에서도 모든 핀이 쓰러지지 않은 상태
- [x] 각 상태에 해당하는 넘어진 핀의 개수를 반환한다.
- [x] 현재 볼링 핀의 개수에 두 번째 볼링 핀의 개수를 더하여 핀 개수를 반환한다.
- [x] 인자로 넘어온 점수에 해당 볼링 핀의 개수를 더한 점수를 반환한다.

#### PinExpression
: 볼링 핀에 대한 표현식
- [x] gutter(0개) 는 "-"
- [x] strike(10개) 는 "X"
- [x] 1~9개 숫자는 "1~9"


#### FrameNumber
: 각 프레임 번호 
- [x] 프레임 번호가 1~10 이외의 숫자면 예외를 반환한다.
- [x] 마지막 프레임이면 return true
- [x] 다음 프레임 단계 만큼 증가한 프레임 번호를 반환한다.
- [x] 논리적 동치성 비교 

#### Frames
: 프레임 리스트
- [x] 처음 생성했을 때 NormalFrame 을 리스트에 추가한다.
- [x] 공을 던진 후 변경된 상태를 가지는 프레임을 추가한다.
    - Hit -> Spare -> Ready 이면 2개
    - Strike -> Strike -> Ready 면 3개
    - Strike -> Hit 면 2개
- [x] 인자로 받은 프레임을 프레임 리스트에 추가할 수 있다. 
- [x] 현재 프레임의 게임 종료 상태를 반환한다.
- [x] 인자로 받은 프레임과 현재 프레임 번호가 동일한지 여부를 판단한다.
- [x] 현재 프레임 번호를 반환한다.
- [x] 모든 프레임의 상태값을 반환한다. 

#### Frame
: 프레임에 대한 추상 클래스
- 해당 프레임의 점수를 반환한다.
- 여분의 보너스 점수를 해결하기 위한 추가적인 점수를 계산하여 반환한다.

#### NormalFrame
: 1~9 번 프레임 
- [x] 쓰러진 공에 따라 상태값이 변경된다.
    - 하나의 상태값을 가진다.
-  상태값이 isFinal(Strike, Spare, Miss) 의 경우 새로운 Frame 생성하여 반환한다.
    - [x] 현재 프레임의 상태가 종료 상태면 다음 프레임을 생성하여 반환한다.
    - [x] 현재 프레임의 상태가 진행 상태면 현재 프레임을 반환한다.
-  프레임 리스트에 프레임을 추가한다.  
    - [x] 현재 프레임의 상태가 종료 상태면 다음 프레임을 추가한다.
    - [x] 현재 프레임의 상태가 진행 상태면 추가하지 않는다.
- [x] 게임 종료가 될 수 없다.
- [x] 자신의 프레임 번호를 반환할 수 있다.
- [x] 자신의 상태값을 반환할 수 있다.  
- [x] 해당 프레임의 점수를 반환한다.
    - 종료 상태가 아니거나 nextFrame 이 null 인 경우 UN_SCORE 를 반환한다.
    - 여분의 보너스 개수가 남아있지 않으면 score 를 반환한다.
    - 여분의 보너스 개수가 남아있으면 다음 프레임의 값에서 추가적인 계산을 수행한다.
- [x] 여분의 보너스 점수를 해결하기 위한 추가적인 점수를 계산하여 반환한다.
    - 상태에 맞는 여분의 보너스 만큼의 점수를 반환한다.
    - 여분의 보너스 개수가 남아있지 않으면 score 를 반환한다.

#### FinalFrame 
: 마지막 10 번 프레임 
- [x] 처음 생성 시에 준비 상태값(Ready)을 하나 가진다.
    - 여러 개의 상태값을 가진다. (최대 3개)
- [x] 현재 상태가 종료 상태의 경우 상태값을 추가한다.
- [x] 현재 상태가 진행 상태의 경우 현재 상태를 제거하고 새로 던진 볼링공의 상태를 추가한다. 
- 게임의 종료 여부를 판단한다.
    - [x] e.g. size 3개
        - x|x|x : (ready) -> strike -> strike -> strike
    - [x] e.g. size 2개, Spare 포함
        - 9|/|x (ready -> hit) -> spare -> strike
        - 9|/|2 (ready -> hit) -> spare -> hit
    - [x] e.g. miss 
        - 5|1 (ready -> hit) -> miss 
        - x|5|1 (ready) -> strike -> miss
- [x] 자신의 프레임 번호(10)를 반환할 수 있다.
- [x] 자신의 상태값을 반환할 수 있다.  
- [x] 해당 프레임의 점수를 반환한다.
- [x] 여분의 보너스 점수를 해결하기 위한 추가적인 점수를 계산하여 반환한다.

#### State
: 볼링 결과 상태에 대한 인터페이스
- [x] 해당 상태의 점수를 반환한다.
- [x] 여분의 보너스 개수만큼 해당 상태의 점수를 추가하여 반환한다.

#### Finished
: 한 프레임의 종료 조건을 만족하는 상태에 대한 추상 클래스
- [x] 해당 상태에서 공을 굴리면 예외를 반환한다.
- [x] 종료 조건을 만족한다. (return true)
- 첫 번째와 두 번째 투구 결과인 볼링 핀을 반환한다.
- [x] 각 프레임이 가지는 모든 상태값을 반환한다.
- **Miss**: 프레임의 두번째 투구에서도 모든 핀이 쓰러지지 않은 상태
    - [x] 해당 상태를 가질 수 없으면 예외 반환
    - [x] Miss 상태이므로 return true 
    - [x] 첫 번째와 두 번째 투구 결과인 볼링 핀을 반환한다.
- **Spare**: 프레임의 두번째 투구에서 모든 핀(10개)을 쓰러트린 상태
    - [x] 해당 상태를 가질 수 없으면 예외 반환
    - [x] Miss 상태가 아님을 반환
    - [x] 첫 번째와 두 번째 투구 결과인 볼링 핀을 반환한다.
- **Strike**: 프레임의 첫번째 투구에서 모든 핀(10개)을 쓰러트린 상태
    - [x] Miss 상태가 아님을 반환
    - [x] 첫 번째 투구 결과인 볼링 핀을 반환, 두 번째 투구는 반환할 수 없다.

#### Running
: 한 프레임에서 아직 진행 중인 상태에 대한 추상 클래스
- [x] 종료 조건을 만족하지 않는다. (return false)
- [x] Miss 상태가 될 수 없다. (return false)
- 첫 번째와 두 번째 투구 결과인 볼링 핀을 반환한다.
- [x] 각 프레임이 가지는 모든 상태값을 반환한다.
- **FirstHit**: 0~9개의 핀을 쓰러트린 상태 
    - [x] 해당 상태를 가질 수 없으면 예외 반환
    - [x] 두번째 투구에서 나머지 볼링 핀이 모두 넘어지면 Spare 반환
    - [x] 두번째 투구에서 볼링 핀이 1개라도 남아있으면 Miss 반환
    - [x] 첫 번째 투구 결과인 볼링 핀을 반환, 두 번째 투구는 반환할 수 없다.
- **Ready**: 볼링을 던지기 전의 상태 
    - [x] 첫 투구에 10개가 넘어지면 Strike 반환
    - [x] 첫 투구에 10개 미만의 볼링 핀이 넘어지면 Hit 반환
    - [x] 첫 번째와 두 번째 투구 결과를 모두 반환할 수 없다.

#### BowlingGame
: Player와 여러 볼링 프레임으로 게임을 구성 
- 게임의 종료 여부를 판단한다.
    - [ ] NormalFrame 의 경우 종료될 수 없다.
    - [ ] FinalFrame 의 종료 조건과 동일 
- [ ] 현재 프레임의 번호를 반환한다.
- [ ] 프레임의 결과값을 반환한다.

#### StateDto
: State DTO (볼링 상태값)
- [x] 상태값이 null이면 예외를 반환한다.
- [x] 상태값의 클래스 타입을 반환한다.
- [x] 상태값의 타입이 Ready 인지 여부를 확인할 수 있다.
- [x] 첫 번째 볼링핀의 출력값을 반환한다.
- [x] 두 번째 볼링핀의 출력값을 반환한다.

#### StateDtos
: 한 프레임에서의 모든 상태값들 
- [x] 볼링 상태값 리스트 인자가 null 인 경우 예외를 반환한다.
- [x] 각 프레임의 모든 상태값을 출력값으로 변환하여 반환한다.
    - FinalFrame 의 경우 상태가 최대 3개까지 가능하다.
    - NormalFrame 의 경우, 상태값은 무조건 1개이다.
    - FinalFrame 에서 Ready 상태는 출력에서 제외한다.

#### StateConverter
: 볼링 상태값을 출력값으로 변환
- [x] 특정 상태값을 알맞는 출력값으로 변환한다.
    - [x] **Miss** : "-|-", "2|3" 문자열 상태 반환 
    - [x] **Spare** :  "9|/", "-|/" 문자열 상태 반환 
    - [x] **Strike** :  "x" 문자열 상태 반환 
    - [x] **FirstHit** :  "2", "- " 문자열 상태 반환 
    - [x] **Ready** :  "" 문자열 상태 반환 

#### Score
: 볼링 점수 (점수, 추가적인 보너스 점수 개수)
- [x] 각 점수 클래스 상태값 반환
- [x] 현재 점수에 추가된 점수를 더하고 보너스 점수 개수를 하나 감소한다.
- [x] 현재 점수에 새로 추가된 점수만 추가하여 반환한다.
- [x] 점수를 계산할 수 있는 상태인지 확인한다
    - 여분의 보너스 개수가 0개이고 UN_SCORE가 아닌 상태만 계산 가능
- [x] 해당 점수가 초기 점수 설정(INIT_SCORE)값인지 확인힌다.
- [x] 자신의 점수를 반환한다.
    - 여분의 보너스 개수가 0이 아니면 예외를 반환한다.
- [x] 논리적 동치성 비교 

#### Scores
: 볼링 점수 일급 컬렉션
- [x] 볼링 점수 리스트를 생성
- [x] 해당 프레임의 점수를 리스트에 추가한다. 
    - (여분의 보너스 개수가 0개이고 UN_SCORE가 아닌 상태)가 아닌 경우
    - INIT_SCORE 인 경우
    - 위의 두가지 경우에는 점수를 계산할 수 없다.
- [x] 점수 리스트를 반환한다.

#### ScoreDto
: 볼링 점수 출력용
- [x] ScoreDto 생성
- [x] 볼링 핀의 개수를 반환한다.

### # V (View)
#### InputView
- [x] 참여자의 이름 문자열로 입력받는다. 
- [x] 넘어뜨린 볼링수를 입력받는다.

#### ResultView
- [x] 기본 볼링 결과판을 출력한다.
- [x] 입력한 볼링수에 따른 매 프레임의 결과값을 출력한다.
- [x] 입력한 볼링수에 따른 점수 결과값을 출력한다.
